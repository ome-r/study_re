<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
		table, th, td { border: 1px solid black; }
        
        .d-none {
            display: none;
        }
	</style>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>

</head>
<body>

    <form id="form_register">
        <div class="row" style="margin: 20px 20px;">
            <h3>HELLO!</h3>
        </div>
        
        <div class="idForm" style="margin-left: 20px;">
            <i class="material-icons prefix">account_id</i><br />
            <input type="text" id="id" class="id" name="id" placeholder="ID 4~19 Words"/><br />
            <i class="material-icons prefix">Password</i><br />
            <input id="pw" name="pw" type="password" style="cursor: auto;"  placeholder="password" /><br />
            <i class="material-icons prefix">Name</i> <br />
            <input type="text" id="name" class="name" name="name" placeholder="What's your name?"/><br />
        </div>

    <div class="row">
        <button type="button" class="btn btn-outline-success" style="margin: 20px 20px 20px 20px; width: 300px;" onclick='register();'>회원가입</button>
        <p class="margin">이미 계정을 갖고 계신가요? <a href="/user/login">지금 로그인하기</a></p>
    </div>
	</form>

    <script>
        function register(){
            let form = document.getElementById("form_register");
            let data = {
                id: form.id.value, 
                pw: form.pw.value,
                name: form.name.value,
            }
            axios({
                method: "post",
                url: '/user/register',
                data: data
            })
            .then((response) => {
                window.location.href = "/user/login"; //login창으로 열기 
                // //id는 서버에서 받아서 사용 data는 name과 comment 받아서 사용 
                // //AXIOS에 의해서 생성된 tr td는 여기서 삭제할 수 있도록 만든다. ${response.data} 에서 id 받아와서 삭제
                // $("table").append(`
                // <tr>
                //     <td>${response.data}</td> 
                //     <td>${data.pw}</td>
                //     <td>${data.name}</td>
                //     <td><button type="button" onclick="delete_visitor(${response.data}, this)">수정</button></td>
                //     <td><button type="button" onclick="delete_visitor(${response.data}, this)">삭제</button></td>
                // </tr>
                //     `)
            })
        }
    </script>
</body>
</html>